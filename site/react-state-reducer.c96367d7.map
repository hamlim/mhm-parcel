{"version":3,"sources":["../node_modules/react-state-reducer/pkg/createStore.js","pages/react-state-reducer.js"],"names":["P","Main","INITIAL_STATE","INC","DEC","ADD_TODO","UPDATE_INPUT","UPDATE_TODO","SET","reducer","type","payload","state","counter","todos","length","text","map","t","id","done","Provider","Consumer","LOCAL","UpdateState","dispatch","synced","window","localStorage","getItem","JSON","parse","setItem","stringify","e","target","value","key","todo","hljs","highlight"],"mappings":"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","file":"react-state-reducer.c96367d7.map","sourceRoot":"../src","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.transform = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar createStore = function createStore(reducer) {\n  var initialState = reducer({\n    type: '@@INIT',\n    payload: null\n  })(undefined);\n  var ctx = (0, _react.createContext)(initialState);\n\n  var Provider = function (_React$Component) {\n    _inherits(Provider, _React$Component);\n\n    function Provider() {\n      var _ref;\n\n      var _temp, _this, _ret;\n\n      _classCallCheck(this, Provider);\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Provider.__proto__ || Object.getPrototypeOf(Provider)).call.apply(_ref, [this].concat(args))), _this), _this.state = _extends({}, initialState), _this.dispatch = function (action) {\n        return _this.setState(reducer(action), function () {\n          _this.props.onUpdate(_this.state);\n        });\n      }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    _createClass(Provider, [{\n      key: 'render',\n      value: function render() {\n        return _react2.default.createElement(\n          ctx.Provider,\n          {\n            value: _extends({}, this.state, {\n              dispatch: this.dispatch\n            })\n          },\n          this.props.children\n        );\n      }\n    }]);\n\n    return Provider;\n  }(_react2.default.Component);\n\n  Provider.defaultProps = {\n    onUpdate: function onUpdate() {}\n  };\n  return { Provider: Provider, Consumer: ctx.Consumer };\n};\n\nexports.default = createStore;\n\n/**\n * Helper to transform classic redux reducers to new format\n */\n\nvar transform = exports.transform = function transform(reducer) {\n  return function (action) {\n    return function (state) {\n      return reducer(state, action);\n    };\n  };\n};","import React, { Fragment } from 'react'\nimport Container from '../components/container.js'\nimport createStore from 'react-state-reducer'\nimport styled from 'react-emotion'\nimport { Flex, Box } from 'grid-emotion'\nimport hljs from 'highlight.js'\nimport Code from '../components/code.js'\nimport Button from '@atlaskit/button'\nimport { ComponentDidMount } from 'recycles'\n\nconst P = styled('p')`\n  margin: 1rem 0;\n`\nconst Main = styled('main')`\n  font-size: 1.3rem;\n  margin-bottom: 3rem;\n`\n\nconst INITIAL_STATE = {\n  todos: [],\n  text: '',\n  counter: 0,\n}\n\nconst INC = 'INC'\nconst DEC = 'DEC'\nconst ADD_TODO = 'ADD_TODO'\nconst UPDATE_INPUT = 'UPDATE_INPUT'\nconst UPDATE_TODO = 'UPDATE_TODO'\n\nconst SET = 'SET'\n\nconst reducer = ({ type, payload }) => (\n  state = INITIAL_STATE,\n) => {\n  switch (type) {\n    case SET: {\n      return {\n        ...state,\n        ...payload,\n      }\n    }\n    case INC: {\n      return {\n        ...state,\n        counter: state.counter + 1,\n      }\n    }\n    case DEC: {\n      return {\n        ...state,\n        counter: state.counter - 1,\n      }\n    }\n    case ADD_TODO: {\n      return {\n        ...state,\n        text: '',\n        todos: [\n          ...state.todos,\n          {\n            id: state.todos.length,\n            text: state.text,\n            done: false,\n          },\n        ],\n      }\n    }\n    case UPDATE_INPUT: {\n      return {\n        ...state,\n        text: payload,\n      }\n    }\n    case UPDATE_TODO: {\n      return {\n        ...state,\n        todos: state.todos.map(t => {\n          if (t.id === payload) {\n            return {\n              ...t,\n              done: !t.done,\n            }\n          } else {\n            return t\n          }\n        }),\n      }\n    }\n    default:\n      return state\n  }\n}\n\nconst { Provider, Consumer } = createStore(reducer)\n\nconst LOCAL = 'MH-RSR'\n\nconst UpdateState = () => (\n  <Consumer>\n    {({ dispatch }) => (\n      <ComponentDidMount>\n        {() => {\n          let synced = window.localStorage.getItem(LOCAL)\n          if (synced) {\n            dispatch({\n              type: SET,\n              payload: JSON.parse(synced),\n            })\n          }\n        }}\n      </ComponentDidMount>\n    )}\n  </Consumer>\n)\n\nexport default () => (\n  <Provider\n    onUpdate={state => {\n      window.localStorage.setItem(\n        LOCAL,\n        JSON.stringify(state),\n      )\n    }}\n  >\n    <Container>\n      <UpdateState />\n      <Main>\n        <header>\n          <h2>\n            <code>React-State-Reducer</code>\n          </h2>\n        </header>\n        <section>\n          <P>\n            This is{' '}\n            <a href=\"https://github.com/hamlim/react-state-reducer\">\n              React-State-Reducer\n            </a>\n            , a simple React library for state management,\n            built on the same patterns that Redux and other\n            Flux libraries pioneered.\n          </P>\n          <div>\n            <Consumer>\n              {({ dispatch, counter }) => (\n                <Flex\n                  justifyContent=\"center\"\n                  alignItems=\"center\"\n                  mt=\"2rem\"\n                >\n                  <Flex\n                    w={1 / 3}\n                    alignItems=\"center\"\n                    justifyContent=\"center\"\n                  >\n                    <Button\n                      appearance=\"primary\"\n                      onClick={_ => dispatch({ type: INC })}\n                    >\n                      Increment\n                    </Button>\n                  </Flex>\n                  <Flex\n                    w={1 / 3}\n                    alignItems=\"center\"\n                    justifyContent=\"center\"\n                  >\n                    {counter}\n                  </Flex>\n                  <Flex\n                    w={1 / 3}\n                    alignItems=\"center\"\n                    justifyContent=\"center\"\n                  >\n                    <Button\n                      appearance=\"primary\"\n                      onClick={_ => dispatch({ type: DEC })}\n                    >\n                      Decrement\n                    </Button>\n                  </Flex>\n                </Flex>\n              )}\n            </Consumer>\n          </div>\n          <div>\n            <P>\n              It allows you to manage how you both update\n              and reconcile state changes by providing{' '}\n              <code>{`<Provider>`}</code> and{' '}\n              <code>{`<Consumer>`}</code> components. The\n              consumer component provides a{' '}\n              <code>dispatch</code> function, along with all\n              of the state spread down to the argument for\n              the children function.\n            </P>\n          </div>\n          <div>\n            <Consumer>\n              {({ dispatch, todos, text }) => (\n                <Fragment>\n                  <label>\n                    Add a todo:\n                    <input\n                      value={text}\n                      onChange={e =>\n                        dispatch({\n                          type: UPDATE_INPUT,\n                          payload: e.target.value,\n                        })\n                      }\n                      onKeyDown={e => {\n                        if (e.key === 'Enter') {\n                          dispatch({ type: ADD_TODO })\n                        }\n                      }}\n                      placeholder=\"Do the dishes\"\n                    />\n                  </label>\n                  <ul>\n                    {todos.map(todo => (\n                      <li key={todo.id}>\n                        {todo.done ? (\n                          <s>{todo.text}</s>\n                        ) : (\n                          todo.text\n                        )}\n                        <Button\n                          appearance=\"link\"\n                          onClick={_ =>\n                            dispatch({\n                              type: UPDATE_TODO,\n                              payload: todo.id,\n                            })\n                          }\n                        >\n                          Mark as{' '}\n                          {todo.done\n                            ? 'incomplete'\n                            : 'complete'}\n                        </Button>\n                      </li>\n                    ))}\n                  </ul>\n                </Fragment>\n              )}\n            </Consumer>\n            <P>\n              In fact this page is using the library to\n              power not only the counter but also the todo\n              application above!\n            </P>\n            <P>\n              And the best part of this is that they are\n              using the same top level Provider, and two\n              different Consumers!\n            </P>\n            <Button\n              appearance=\"primary\"\n              onClick={_ => {\n                let synced = window.localStorage.getItem(\n                  LOCAL,\n                )\n                if (synced) {\n                  window.localStorage.setItem(LOCAL, '')\n                }\n              }}\n            >\n              Clear out local storage\n            </Button>\n            <details>\n              <summary>\n                Here is the code for this entire webpage:\n              </summary>\n              <div className=\"hljs\">\n                <Code\n                  style={{\n                    maxWidth: '100%',\n                    overflow: 'scroll',\n                  }}\n                >\n                  <code\n                    dangerouslySetInnerHTML={{\n                      __html: hljs.highlight(\n                        'jsx',\n                        `import React, { Fragment } from 'react'\nimport createStore from 'react-state-reducer'\n\nconst INITIAL_STATE = {\n  todos: [],\n  text: '',\n  counter: 0,\n}\n\nconst INC = 'INC'\nconst DEC = 'DEC'\nconst ADD_TODO = 'ADD_TODO'\nconst UPDATE_INPUT = 'UPDATE_INPUT'\nconst UPDATE_TODO = 'UPDATE_TODO'\n\nconst reducer = ({ type, payload }) => (\n  state = INITIAL_STATE,\n) => {\n  switch (type) {\n    case INC: {\n      return {\n        ...state,\n        counter: state.counter + 1,\n      }\n    }\n    case DEC: {\n      return {\n        ...state,\n        counter: state.counter - 1,\n      }\n    }\n    case ADD_TODO: {\n      return {\n        ...state,\n        text: '',\n        todos: [\n          ...state.todos,\n          {\n            id: state.todos.length,\n            text: state.text,\n            done: false,\n          },\n        ],\n      }\n    }\n    case UPDATE_INPUT: {\n      return {\n        ...state,\n        text: payload,\n      }\n    }\n    case UPDATE_TODO: {\n      return {\n        ...state,\n        todos: state.todos.map(t => {\n          if (t.id === payload) {\n            return {\n              ...t,\n              done: !t.done,\n            }\n          } else {\n            return t\n          }\n        }),\n      }\n    }\n    default:\n      return state\n  }\n}\n\nconst { Provider, Consumer } = createStore(reducer)\n\nexport default () => (\n  <Provider>\n    <Container>\n      <Main>\n        <section>\n          <div>\n            <Consumer>\n              {({ dispatch, counter }) => (\n                <Flex\n                  justifyContent=\"center\"\n                  alignItems=\"center\"\n                  mt=\"2rem\"\n                >\n                  <Flex\n                    w={1 / 3}\n                    alignItems=\"center\"\n                    justifyContent=\"center\"\n                  >\n                    <Button\n                      appearance=\"primary\"\n                      onClick={_ => dispatch({ type: INC })}\n                    >\n                      Increment\n                    </Button>\n                  </Flex>\n                  <Flex\n                    w={1 / 3}\n                    alignItems=\"center\"\n                    justifyContent=\"center\"\n                  >\n                    {counter}\n                  </Flex>\n                  <Flex\n                    w={1 / 3}\n                    alignItems=\"center\"\n                    justifyContent=\"center\"\n                  >\n                    <Button\n                      appearance=\"primary\"\n                      onClick={_ => dispatch({ type: DEC })}\n                    >\n                      Decrement\n                    </Button>\n                  </Flex>\n                </Flex>\n              )}\n            </Consumer>\n            <Consumer>\n              {({ dispatch, todos, text }) => (\n                <Fragment>\n                  <label>\n                    Add a todo:\n                    <input\n                      value={text}\n                      onChange={e =>\n                        dispatch({\n                          type: UPDATE_INPUT,\n                          payload: e.target.value,\n                        })\n                      }\n                      onKeyDown={e => {\n                        if (e.key === 'Enter') {\n                          dispatch({ type: ADD_TODO })\n                        }\n                      }}\n                      placeholder=\"Do the dishes\"\n                    />\n                  </label>\n                  <ul>\n                    {todos.map(todo => (\n                      <li key={todo.id}>\n                        {todo.done ? (\n                          <s>{todo.text}</s>\n                        ) : (\n                          todo.text\n                        )}\n                        <Button\n                          appearance=\"link\"\n                          onClick={_ =>\n                            dispatch({\n                              type: UPDATE_TODO,\n                              payload: todo.id,\n                            })\n                          }\n                        >\n                          Mark as{' '}\n                          {todo.done\n                            ? 'incomplete'\n                            : 'complete'}\n                        </Button>\n                      </li>\n                    ))}\n                  </ul>\n                </Fragment>\n              )}\n            </Consumer>\n          </div>\n        </section>\n      </Main>\n    </Container>\n  </Provider>\n)\n`,\n                      ).value,\n                    }}\n                  />\n                </Code>\n              </div>\n            </details>\n          </div>\n          <P>\n            If you made it this far down, check out the\n            project on{' '}\n            <a href=\"https://github.com/hamlim/react-state-reducer\">\n              Github\n            </a>.\n          </P>\n        </section>\n      </Main>\n    </Container>\n  </Provider>\n)\n"]}